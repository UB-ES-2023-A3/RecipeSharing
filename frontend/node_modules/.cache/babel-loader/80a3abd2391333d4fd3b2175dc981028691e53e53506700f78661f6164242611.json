{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, withModifiers as _withModifiers, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"mainContainer\",\n  style: {\n    \"color\": \"black\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"form-background\"\n};\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"mainTitle\"\n}, [/*#__PURE__*/_createCommentVNode(\" Main title for the login page with custom color \"), /*#__PURE__*/_createElementVNode(\"h1\", {\n  style: {\n    \"color\": \"#ff5733\"\n  }\n}, \"Login\")], -1 /* HOISTED */);\nconst _hoisted_4 = {\n  class: \"form-group\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"usernameOrEmail\"\n}, \"Username or Email:\", -1 /* HOISTED */);\nconst _hoisted_6 = {\n  class: \"form-group\"\n};\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\"\n}, \"Password:\", -1 /* HOISTED */);\nconst _hoisted_8 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"secondaryContainer\",\n  style: {\n    \"background-color\": \"white\"\n  }\n}, [/*#__PURE__*/_createCommentVNode(\" Login button to submit the form \"), /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"submit-button\"\n}, \"Login\")], -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_AppTextField = _resolveComponent(\"AppTextField\");\n  const _component_AppTextFieldPassword = _resolveComponent(\"AppTextFieldPassword\");\n  const _component_router_link = _resolveComponent(\"router-link\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.login && $options.login(...args), [\"prevent\"])),\n    class: \"form\"\n  }, [_createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _createCommentVNode(\" AppTextField component for username or email input \"), _createVNode(_component_AppTextField, {\n    defaultMessage: $data.defaultMessageUsernameOrEmail,\n    \"onUpdate:textValue\": _cache[0] || (_cache[0] = $event => $data.usernameOrEmail = $event)\n  }, null, 8 /* PROPS */, [\"defaultMessage\"])]), _createElementVNode(\"div\", _hoisted_6, [_hoisted_7, _createCommentVNode(\" AppTextFieldPassword component for password input \"), _createVNode(_component_AppTextFieldPassword, {\n    defaultMessage: $data.defaultMessagePassword,\n    \"onUpdate:textValue\": _cache[1] || (_cache[1] = $event => $data.password = $event)\n  }, null, 8 /* PROPS */, [\"defaultMessage\"])]), _createElementVNode(\"p\", null, [_createCommentVNode(\" Router link to navigate to the registration page if the user doesn't have an account \"), _createVNode(_component_router_link, {\n    to: \"/register\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\"Don't have an account? Register here\")]),\n    _: 1 /* STABLE */\n  })]), _hoisted_8], 32 /* HYDRATE_EVENTS */)])]);\n}","map":{"version":3,"names":["class","style","_createElementVNode","_createCommentVNode","for","type","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","onSubmit","_cache","_withModifiers","args","$options","login","_hoisted_4","_hoisted_5","_createVNode","_component_AppTextField","defaultMessage","$data","defaultMessageUsernameOrEmail","$event","usernameOrEmail","_hoisted_6","_hoisted_7","_component_AppTextFieldPassword","defaultMessagePassword","password","_component_router_link","to","_hoisted_8"],"sources":["C:\\Users\\Usuario\\Desktop\\Adri\\UB\\4º\\1º\\Ingeniería de Software\\Practica\\RecipeSharing\\frontend\\src\\pages\\LoginPage.vue"],"sourcesContent":["<template>\n    <div class=\"mainContainer\" style=\"color: black\">\n        <div class=\"form-background\">\n            <div class=\"mainTitle\">\n                <!-- Main title for the login page with custom color -->\n                <h1 style=\"color: #ff5733\">Login</h1>\n            </div>\n            <form @submit.prevent=\"login\" class=\"form\">\n                <div class=\"form-group\">\n                    <label for=\"usernameOrEmail\">Username or Email:</label>\n                    <!-- AppTextField component for username or email input -->\n                    <AppTextField\n                            :defaultMessage=\"defaultMessageUsernameOrEmail\"\n                            @update:textValue=\"usernameOrEmail = $event\"\n                    />\n                </div>\n                <div class=\"form-group\">\n                    <label for=\"password\">Password:</label>\n                    <!-- AppTextFieldPassword component for password input -->\n                    <AppTextFieldPassword\n                            :defaultMessage=\"defaultMessagePassword\"\n                            @update:textValue=\"password = $event\"\n                    />\n                </div>\n                <p>\n                    <!-- Router link to navigate to the registration page if the user doesn't have an account -->\n                    <router-link to=\"/register\">Don't have an account? Register here</router-link>\n                </p>\n                <div class=\"secondaryContainer\" style=\"background-color: white\">\n                    <!-- Login button to submit the form -->\n                    <button type=\"submit\" class=\"submit-button\">Login</button>\n                </div>\n            </form>\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport '../assets/styles/appStyles.css';\nimport AppTextField from \"@/components/AppTextField.vue\";\nimport axios from 'axios';\nimport AppTextFieldPassword from \"@/components/AppTextFieldPassword.vue\"\n\nexport default {\n    name: \"LoginPage\",\n    components: {AppTextFieldPassword, AppTextField},\n    data() {\n        return {\n            // Data properties for username, email, password, and more\n            usernameOrEmail: \"\",\n            password: \"\",\n            username: \"\",\n            email: \"\",\n            defaultMessageUsernameOrEmail: \"Enter your username or email\",\n            defaultMessagePassword: \"Enter your password\",\n            logged: false, // A flag to indicate if the user is logged in\n        };\n    },\n    methods: {\n        async login() {\n            // Determine if the input is an email or username\n            if (this.usernameOrEmail === 0 || this.password.length === 0) {\n                alert(\"Complete the form\");\n                return;\n            }\n            let loginIdentifier = this.usernameOrEmail;\n            if (loginIdentifier.match(/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,4}$/)) {\n                // If it matches the email format, set it as an email\n                this.email = loginIdentifier;\n            } else {\n                // Otherwise, set it as a username\n                this.username = loginIdentifier;\n            }\n\n            try {\n                let response = await axios.post('/login/', {\n                    username: this.username,\n                    email: this.email,\n                    password: this.password,\n                }, {\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                });\n\n                if (response.status === 200) {\n                    // Successful login, perform necessary actions\n                    alert(\"Logged!\") // Display a success message\n                    this.logged = true; // Set the logged flag to true\n                    localStorage.setItem('logged', this.logged); // Store the logged status in local storage\n                    localStorage.setItem('username', this.username);\n                    this.$emit('login-success', this.logged); // Emit a custom event indicating login success\n                    this.$emit('username-success', this.username);\n                    this.$emit('email-success', this.email);\n                    this.$emit('password-success', this.password);\n                    this.$router.push('/'); // Redirect to the home page\n                }\n            } catch (error) {\n                if (error.response) {\n                    // Handle login failure (e.g., display an error message).\n                    if (error.response.status === 400) {\n                        alert(error.response.data.error);\n                    } else if (error.response.status === 500) {\n                        alert(\"An error occurred while registering.\");\n                    } else {\n                        // Handle other status codes\n                        alert(\"Unexpected error\");\n                    }\n                } else {\n                    // Handle other errors.\n                    console.error(\"An error occurred while logging in.\");\n                }\n            }\n        },\n    }\n};\n\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":";;EACSA,KAAK,EAAC,eAAe;EAACC,KAAoB,EAApB;IAAA;EAAA;;;EAClBD,KAAK,EAAC;AAAiB;gCACxBE,mBAAA,CAGM;EAHDF,KAAK,EAAC;AAAW,I,aAClBG,mBAAA,qDAAwD,E,aACxDD,mBAAA,CAAqC;EAAjCD,KAAsB,EAAtB;IAAA;EAAA;AAAsB,GAAC,OAAK,E;;EAG3BD,KAAK,EAAC;AAAY;gCACnBE,mBAAA,CAAuD;EAAhDE,GAAG,EAAC;AAAiB,GAAC,oBAAkB;;EAO9CJ,KAAK,EAAC;AAAY;gCACnBE,mBAAA,CAAuC;EAAhCE,GAAG,EAAC;AAAU,GAAC,WAAS;gCAWnCF,mBAAA,CAGM;EAHDF,KAAK,EAAC,oBAAoB;EAACC,KAA+B,EAA/B;IAAA;EAAA;iBAC5BE,mBAAA,qCAAwC,E,aACxCD,mBAAA,CAA0D;EAAlDG,IAAI,EAAC,QAAQ;EAACL,KAAK,EAAC;GAAgB,OAAK,E;;;;;;uBA7BjEM,mBAAA,CAiCM,OAjCNC,UAiCM,GAhCFL,mBAAA,CA+BM,OA/BNM,UA+BM,GA9BFC,UAGM,EACNP,mBAAA,CAyBO;IAzBAQ,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAC,KAAA,IAAAD,QAAA,CAAAC,KAAA,IAAAF,IAAA,CAAK;IAAEb,KAAK,EAAC;MAChCE,mBAAA,CAOM,OAPNc,UAOM,GANFC,UAAuD,EACvDd,mBAAA,wDAA2D,EAC3De,YAAA,CAGEC,uBAAA;IAFOC,cAAc,EAAEC,KAAA,CAAAC,6BAA6B;IAC7C,oBAAgB,EAAAX,MAAA,QAAAA,MAAA,MAAAY,MAAA,IAAEF,KAAA,CAAAG,eAAe,GAAGD,MAAM;iDAGvDrB,mBAAA,CAOM,OAPNuB,UAOM,GANFC,UAAuC,EACvCvB,mBAAA,uDAA0D,EAC1De,YAAA,CAGES,+BAAA;IAFOP,cAAc,EAAEC,KAAA,CAAAO,sBAAsB;IACtC,oBAAgB,EAAAjB,MAAA,QAAAA,MAAA,MAAAY,MAAA,IAAEF,KAAA,CAAAQ,QAAQ,GAAGN,MAAM;iDAGhDrB,mBAAA,CAGI,YAFAC,mBAAA,0FAA6F,EAC7Fe,YAAA,CAA8EY,sBAAA;IAAjEC,EAAE,EAAC;EAAW;sBAAC,MAAoC,C,iBAApC,sCAAoC,E;;QAEpEC,UAGM,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}