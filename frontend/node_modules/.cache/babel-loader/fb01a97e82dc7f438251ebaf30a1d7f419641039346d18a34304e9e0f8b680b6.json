{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-5e6f3bea\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"button-image-user\"\n};\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = {\n  key: 0,\n  class: \"user-menu\"\n};\nconst _hoisted_4 = {\n  key: 1,\n  class: \"user-menu\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.toggleMenu && $options.toggleMenu(...args)),\n    class: \"button-image-user\"\n  }, [_createElementVNode(\"img\", {\n    src: $data.userImage,\n    alt: \"Button\",\n    class: \"user-image\"\n  }, null, 8 /* PROPS */, _hoisted_2)]), _createCommentVNode(\" Use v-if to show the menu when isMenuOpen is true \"), $props.logged && $data.isMenuOpen ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createElementVNode(\"ul\", null, [_createElementVNode(\"li\", {\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.goToProfile && $options.goToProfile(...args))\n  }, \"My Profile\"), _createElementVNode(\"li\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.logout && $options.logout(...args))\n  }, \"Log Out\")])])) : _createCommentVNode(\"v-if\", true), !$props.logged && $data.isMenuOpen ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createElementVNode(\"ul\", null, [_createElementVNode(\"li\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.goToLogin && $options.goToLogin(...args))\n  }, \"Log In\")])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","onClick","_cache","args","$options","toggleMenu","src","$data","userImage","alt","_createCommentVNode","$props","logged","isMenuOpen","_hoisted_3","goToProfile","logout","_hoisted_4","goToLogin"],"sources":["C:\\Users\\Usuario\\Desktop\\Adri\\UB\\4º\\1º\\Ingeniería de Software\\Practica\\RecipeSharing\\frontend\\src\\components\\AppHeaderUserButton.vue"],"sourcesContent":["<template>\n    <div class=\"button-image-user\">\n        <div @click=\"toggleMenu\" class=\"button-image-user\">\n            <img :src=\"userImage\" alt=\"Button\" class=\"user-image\"/>\n        </div>\n        <!-- Use v-if to show the menu when isMenuOpen is true -->\n        <div v-if=\"logged && isMenuOpen\" class=\"user-menu\">\n            <ul>\n                <li @click=\"goToProfile\">My Profile</li>\n                <li @click=\"logout\">Log Out</li>\n            </ul>\n        </div>\n        <div v-if=\"!logged && isMenuOpen\" class=\"user-menu\">\n            <ul>\n                <li @click=\"goToLogin\">Log In</li>\n            </ul>\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport axios from \"axios\";\n\nexport default {\n    props: {\n        logged: Boolean, // Define the logged property\n        username: String,\n        email: String,\n        password: String,\n    },\n    data() {\n        return {\n            isMenuOpen: false, // Controls the visibility of the user menu\n            name: \"AppHeaderUserButton\",\n            userImage: require(\"../assets/images/DefaultUser.jpg\"), // User image path\n        };\n    },\n    methods: {\n        toggleMenu() {\n            this.isMenuOpen = !this.isMenuOpen; // Toggles the user menu\n            if (this.isMenuOpen) {\n                // Si el menú se abre, agrega un manejador de eventos de clic al documento\n                document.addEventListener('click', this.closeMenuOnClickOutside);\n            } else {\n                // Si el menú se cierra, elimina el manejador de eventos de clic del documento\n                document.removeEventListener('click', this.closeMenuOnClickOutside);\n            }\n        },\n        closeMenu() {\n            this.isMenuOpen = false;\n            document.removeEventListener('click', this.closeMenuOnClickOutside);\n        },\n        closeMenuOnClickOutside(event) {\n            // Cierra el menú si se hace clic en cualquier parte de la pantalla que no sea el botón o el menú.\n            const button = this.$el.querySelector('.button-image-user');\n            const menu = this.$el.querySelector('.user-menu');\n            if (button && !button.contains(event.target) && menu && !menu.contains(event.target)) {\n                this.closeMenu();\n            }\n        },\n        goToLogin() {\n            this.$router.push('/login'); // Navigate to the login page\n        },\n        goToProfile() {\n            // Add logic to navigate to the user's profile page if needed\n            // Example: this.$router.push('/profile');\n        },\n        async logout() {\n            try {\n                let response = await axios.post('/login/', {\n                    username: this.username,\n                    email: this.email,\n                    password: this.password,\n                }, {\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                });\n\n                if (response.status === 200) {\n                    // Successful login, redirect the user or perform other necessary actions\n                }\n            } catch (error) {\n                if (error.response) {\n                    // Handle login failure (e.g., display an error message).\n                    if (error.response.status === 400) {\n                        alert(error.response.data.error);\n                        localStorage.setItem('logged', false);\n                        localStorage.setItem('username', null);\n                        localStorage.setItem('email', null);\n                        localStorage.setItem('password', null);\n                        window.location.reload();\n                    } else if (error.response.status === 500) {\n                        alert(\"An error occurred while logging in.\");\n                    } else {\n                        // Handle other status codes\n                        alert(\"Unexpected error\");\n                    }\n                } else {\n                    // Handle other errors.\n                    console.error(\"An error occurred while logging in.\");\n                }\n            }\n        },\n    },\n};\n\n</script>\n\n<style scoped>\n\n.button-image-user {\n    position: absolute;\n    top: 0;\n    right: 0;\n    height: 100%;\n    margin-top: 7px;\n    margin-right: 10px;\n    border-radius: 50%;\n}\n\n.user-image {\n    width: 70px;\n    height: 70px;\n    border-radius: 50%;\n    margin-right: 10px;\n}\n\n.user-menu {\n    position: absolute;\n    top: 60px;\n    right: 0;\n    background-color: #fff;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n    width: 100px;\n}\n\nul {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n}\n\nli {\n    padding: 10px;\n    cursor: pointer;\n}\n\nli:hover {\n    background-color: #f0f0f0;\n}\n\n</style>"],"mappings":";;;EACSA,KAAK,EAAC;AAAmB;;;;EAKOA,KAAK,EAAC;;;;EAMLA,KAAK,EAAC;;;uBAX5CC,mBAAA,CAgBM,OAhBNC,UAgBM,GAfFC,mBAAA,CAEM;IAFAC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;IAAEN,KAAK,EAAC;MAC3BG,mBAAA,CAAuD;IAAjDM,GAAG,EAAEC,KAAA,CAAAC,SAAS;IAAEC,GAAG,EAAC,QAAQ;IAACZ,KAAK,EAAC;yCAE7Ca,mBAAA,uDAA0D,EAC/CC,MAAA,CAAAC,MAAM,IAAIL,KAAA,CAAAM,UAAU,I,cAA/Bf,mBAAA,CAKM,OALNgB,UAKM,GAJFd,mBAAA,CAGK,aAFDA,mBAAA,CAAwC;IAAnCC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAW,WAAA,IAAAX,QAAA,CAAAW,WAAA,IAAAZ,IAAA,CAAW;KAAE,YAAU,GACnCH,mBAAA,CAAgC;IAA3BC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAY,MAAA,IAAAZ,QAAA,CAAAY,MAAA,IAAAb,IAAA,CAAM;KAAE,SAAO,E,2CAGvBQ,MAAA,CAAAC,MAAM,IAAIL,KAAA,CAAAM,UAAU,I,cAAhCf,mBAAA,CAIM,OAJNmB,UAIM,GAHFjB,mBAAA,CAEK,aADDA,mBAAA,CAAkC;IAA7BC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,QAAA,CAAAc,SAAA,IAAAd,QAAA,CAAAc,SAAA,IAAAf,IAAA,CAAS;KAAE,QAAM,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}