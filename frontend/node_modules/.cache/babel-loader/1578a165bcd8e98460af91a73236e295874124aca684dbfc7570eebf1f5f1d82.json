{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  props: {\n    logged: Boolean,\n    // Define the logged property\n    username: String,\n    email: String,\n    password: String\n  },\n  data() {\n    return {\n      isMenuOpen: false,\n      // Controls the visibility of the user menu\n      name: \"AppHeaderUserButton\",\n      userImage: require(\"../assets/images/DefaultUser.jpg\") // User image path\n    };\n  },\n\n  methods: {\n    toggleMenu() {\n      this.isMenuOpen = !this.isMenuOpen; // Toggles the user menu\n      if (this.isMenuOpen) {\n        // Si el menú se abre, agrega un manejador de eventos de clic al documento\n        document.addEventListener('click', this.closeMenuOnClickOutside);\n      } else {\n        // Si el menú se cierra, elimina el manejador de eventos de clic del documento\n        document.removeEventListener('click', this.closeMenuOnClickOutside);\n      }\n    },\n    closeMenu() {\n      this.isMenuOpen = false;\n      document.removeEventListener('click', this.closeMenuOnClickOutside);\n    },\n    closeMenuOnClickOutside(event) {\n      // Cierra el menú si se hace clic en cualquier parte de la pantalla que no sea el botón o el menú.\n      const button = this.$el.querySelector('.button-image-user');\n      const menu = this.$el.querySelector('.user-menu');\n      if (button && !button.contains(event.target) && menu && !menu.contains(event.target)) {\n        this.closeMenu();\n      }\n    },\n    goToLogin() {\n      this.$router.push('/login'); // Navigate to the login page\n    },\n\n    goToProfile() {\n      // Add logic to navigate to the user's profile page if needed\n      // Example: this.$router.push('/profile');\n    },\n    async logout() {\n      try {\n        let response = await axios.post('/login/', {\n          username: this.username,\n          email: this.email,\n          password: this.password\n        }, {\n          headers: {\n            'Content-Type': 'application/json'\n          }\n        });\n        if (response.status === 200) {\n          // Successful login, redirect the user or perform other necessary actions\n        }\n      } catch (error) {\n        if (error.response) {\n          // Handle login failure (e.g., display an error message).\n          if (error.response.status === 400) {\n            alert(error.response.data.error);\n            localStorage.setItem('logged', false);\n            localStorage.setItem('username', null);\n            localStorage.setItem('email', null);\n            localStorage.setItem('password', null);\n            window.location.reload();\n          } else if (error.response.status === 500) {\n            alert(\"An error occurred while logging in.\");\n          } else {\n            // Handle other status codes\n            alert(\"Unexpected error\");\n          }\n        } else {\n          // Handle other errors.\n          console.error(\"An error occurred while logging in.\");\n        }\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","props","logged","Boolean","username","String","email","password","data","isMenuOpen","name","userImage","require","methods","toggleMenu","document","addEventListener","closeMenuOnClickOutside","removeEventListener","closeMenu","event","button","$el","querySelector","menu","contains","target","goToLogin","$router","push","goToProfile","logout","response","post","headers","status","error","alert","localStorage","setItem","window","location","reload","console"],"sources":["C:\\Users\\Usuario\\Desktop\\Adri\\UB\\4º\\1º\\Ingeniería de Software\\Practica\\RecipeSharing\\frontend\\src\\components\\AppHeaderUserButton.vue"],"sourcesContent":["<template>\n    <div class=\"button-image-user\">\n        <div @click=\"toggleMenu\" class=\"button-image-user\">\n            <img :src=\"userImage\" alt=\"Button\" class=\"user-image\"/>\n        </div>\n        <!-- Use v-if to show the menu when isMenuOpen is true -->\n        <div v-if=\"logged && isMenuOpen\" class=\"user-menu\">\n            <ul>\n                <li @click=\"goToProfile\">My Profile</li>\n                <li @click=\"logout\">Log Out</li>\n            </ul>\n        </div>\n        <div v-if=\"!logged && isMenuOpen\" class=\"user-menu\">\n            <ul>\n                <li @click=\"goToLogin\">Log In</li>\n            </ul>\n        </div>\n    </div>\n</template>\n\n<script>\n\nimport axios from \"axios\";\n\nexport default {\n    props: {\n        logged: Boolean, // Define the logged property\n        username: String,\n        email: String,\n        password: String,\n    },\n    data() {\n        return {\n            isMenuOpen: false, // Controls the visibility of the user menu\n            name: \"AppHeaderUserButton\",\n            userImage: require(\"../assets/images/DefaultUser.jpg\"), // User image path\n        };\n    },\n    methods: {\n        toggleMenu() {\n            this.isMenuOpen = !this.isMenuOpen; // Toggles the user menu\n            if (this.isMenuOpen) {\n                // Si el menú se abre, agrega un manejador de eventos de clic al documento\n                document.addEventListener('click', this.closeMenuOnClickOutside);\n            } else {\n                // Si el menú se cierra, elimina el manejador de eventos de clic del documento\n                document.removeEventListener('click', this.closeMenuOnClickOutside);\n            }\n        },\n        closeMenu() {\n            this.isMenuOpen = false;\n            document.removeEventListener('click', this.closeMenuOnClickOutside);\n        },\n        closeMenuOnClickOutside(event) {\n            // Cierra el menú si se hace clic en cualquier parte de la pantalla que no sea el botón o el menú.\n            const button = this.$el.querySelector('.button-image-user');\n            const menu = this.$el.querySelector('.user-menu');\n            if (button && !button.contains(event.target) && menu && !menu.contains(event.target)) {\n                this.closeMenu();\n            }\n        },\n        goToLogin() {\n            this.$router.push('/login'); // Navigate to the login page\n        },\n        goToProfile() {\n            // Add logic to navigate to the user's profile page if needed\n            // Example: this.$router.push('/profile');\n        },\n        async logout() {\n            try {\n                let response = await axios.post('/login/', {\n                    username: this.username,\n                    email: this.email,\n                    password: this.password,\n                }, {\n                    headers: {\n                        'Content-Type': 'application/json'\n                    }\n                });\n\n                if (response.status === 200) {\n                    // Successful login, redirect the user or perform other necessary actions\n                }\n            } catch (error) {\n                if (error.response) {\n                    // Handle login failure (e.g., display an error message).\n                    if (error.response.status === 400) {\n                        alert(error.response.data.error);\n                        localStorage.setItem('logged', false);\n                        localStorage.setItem('username', null);\n                        localStorage.setItem('email', null);\n                        localStorage.setItem('password', null);\n                        window.location.reload();\n                    } else if (error.response.status === 500) {\n                        alert(\"An error occurred while logging in.\");\n                    } else {\n                        // Handle other status codes\n                        alert(\"Unexpected error\");\n                    }\n                } else {\n                    // Handle other errors.\n                    console.error(\"An error occurred while logging in.\");\n                }\n            }\n        },\n    },\n};\n\n</script>\n\n<style scoped>\n\n.button-image-user {\n    position: absolute;\n    top: 0;\n    right: 0;\n    height: 100%;\n    margin-top: 7px;\n    margin-right: 10px;\n    border-radius: 50%;\n}\n\n.user-image {\n    width: 70px;\n    height: 70px;\n    border-radius: 50%;\n    margin-right: 10px;\n}\n\n.user-menu {\n    position: absolute;\n    top: 60px;\n    right: 0;\n    background-color: #fff;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);\n    width: 100px;\n}\n\nul {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n}\n\nli {\n    padding: 10px;\n    cursor: pointer;\n}\n\nli:hover {\n    background-color: #f0f0f0;\n}\n\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}